<!DOCTYPE html>
<html>

<head>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../lib/normalize-3.0.2.css">
    <link rel="stylesheet" href="../../lib/font-awesome-4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/index.css">

    <style>
        /* this style applies to loader while app css is loading*/
        .splash.page{
            position: fixed;
            top:0px;
            left:0px;
            z-index: 9999;

            height: 100vh;
            width: 100vw;
        }
        .splash.page > .content{}
        .splash.page > .content > h1, .splash.page > .content > h5{
            margin: 0 auto;
        }
        .splash.page > .content{
            background-color: black;
            color: white;
            text-align : center;
            height: 100%;
            width: 100%;
        }

    </style>

</head>

<body id="slate">
    <div class="splash page" ng-show="false">
        <div id="loader" class="content" ng-hide="true">
            <h1></h1>
            <h5>loading...</h5>
        </div>
    </div>
    <nav></nav>

    <ul class="deck"
        ng-class="{'focus' : deck.current}">
        <li ng-repeat="i in [0,1,2, 3, 4, 5,6,7, 8,9, 10, 11,12,13, 14, 15 ,16,17,18,19,20,21,22]" ng-class="{'selected' : deck.current == i, 'selected-head' : deck.current < i - 1, 'selected-tail' : deck.current > i + 1, 'selected-pre' : deck.current == i - 1,'selected-post' : deck.current == i + 1}">
            <div class="card"
                 ng-click="deck.current = deck.current == i ? null : i">
                <img src="../../images/carousel/carousel-1.jpg">
            </div>
        </li>
    </ul>

    <script src="../../lib/jquery-2.1.4.min.js"></script>
    <script src="../../lib/angular-1.4.3.js"></script>
    <script>

        var app = angular.module("slate", []);
        app.directive("deck", [function(){
            var select = function(index){
                        var card = $($(".deck > li")[index]),
                            offsetPadding = 10,
                            offsetY =  $(".deck").offset().top - card.offset().top,
                            offsetX =  $(".deck").offset().left - card.offset().left;

                        card.css("transform", "translateY("+(offsetY+offsetPadding)+"px)" + "translateX("+(offsetX+offsetPadding) +"px)");
                        console.log("now : " + index);
                    },
                unSelect = function(index){
                    var card = $($(".deck > li")[index]);
                    card.css("transform", "");
                    console.log("last : " + index);
                };
            return {
                restrict: "C",
                scope: true,
                transclude: false,
                link: function(scope, element, attrs){
                    scope.deck = {
                        current: undefined
                    };
                    scope.$watch("deck.current", function(now, previous){
                        now && select(now);
                        previous && unSelect(previous);
                    });
                }
            };
        }])
         var init = function(){
             angular.bootstrap(document.getElementById("slate"), ["slate"]);
         };
        init();
    </script>
</body>
</html>
