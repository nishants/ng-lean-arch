<!DOCTYPE html>
<html>

<head>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../lib/normalize-3.0.2.css">
    <link rel="stylesheet" href="../../lib/font-awesome-4.5.0/css/font-awesome.min.css">
    <style>

    </style>

</head>

<body ng-app="world-traverl" ng-controller="MapController">
    <div class  = "map"
         onload = "map.load()"
         ng-include="'../../world map/Discrete Best Map.svg'"></div>

<script src="../../lib/Snap.svg-0.4.1/dist/snap.svg-min.js"></script>
<script src="../../lib/jquery-2.1.4.min.js"></script>
<script src="../../lib/angular-1.4.3.js"></script>
<script>

    var Country = function(map, isoCode){
        var selector = "." + isoCode + ".land",
            coast = map.find(selector),
            inland = coast.find(selector);

        this.land =  inland.length ? inland : coast;
    };

    Country.prototype.highlight = function(){
        this.land.css("fill", "red");
    };

    var Map = function($map){
        this.$map = $map;
    };

    Map.prototype.findCountry = function(isoCode){
        return new Country(this.$map, isoCode)
    };

    var app = angular.module("world-traverl",[]);
    app.controller("MapController", function($scope){
       $scope.map = {
           map: null,
           ready: false,
           findCountry: function(code){
               return this.map.findCountry(code);
           },
           load: function(){
               this.map = new Map($(".map > svg").first());
               this.ready = true;
           }
       };
        window.map = $scope.map;
    });

</script>
</body>
</html>
