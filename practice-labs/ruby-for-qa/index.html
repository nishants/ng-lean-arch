<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="../favicon.gif" type="image/gif" sizes="16x16">

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">    <script src="../../lib/ace/ace.js"></script>
    <script src="../../lib/ace/theme-monokai.js"></script>
    <script src="../../lib/ace/mode-ruby.js"></script>
    <script src="../../lib/ace/ext-beautify.js"></script>
    <meta charset="UTF-8">
    <title>amoeba social</title>
</head>
<style>
    #editor {
        /** Setting height is also important, otherwise editor wont showup**/
        height: calc(100vh - 60px);
        width: 100%;
    }
    #top-bar{
        height: 30px;
        line-height: 30px;
        padding-left: 10px;
        width: 100%;
    }
    #run-button > a{
        width: 200px;
    }
    #run-button{
        float: right;
        padding: 5px 10px;
    }
    #section-name{
        display: inline-block;
    }
</style>
<body>

<div id="top-bar">
    <div id="section-name">Exercise One</div>
    <div id="run-button"><a class="btn btn-default">run</a></div>
</div>
<div class="main-container">
    <div class="editor-view">
        <pre id="editor">
def prepare
	 report = []

	page = {
	    :name         => "Dam",
	    :full_name    => "Dam Sam",
	    :age         => 32,
	    :address => {:city => "Delhi", :from => {:day => 3, :month => 2, :year => 2014}},
	    :past_addresses => [
	        {:city => "Mumbai",    :from => {:day => 13, :month => 7, :year => 2012},   :to => {:day => 3, :month  => 2, :year => 2014}},
	        {:city => "Chennai",   :from => {:day => 17, :month => 3, :year => 2010},   :to => {:day => 13, :month => 7, :year => 2012}},
	        {:city => "Guwahati",  :from => {:day => 4,  :month => 2, :year => 2006},   :to => {:day => 17, :month => 3, :year => 2010}}
	    ]
	}

	def verify (value, expected, testName)
	  error       = (value != expected)
	  title       = (error ?  "Failed : " : "Okay   : ") + testName
	  line_break  = ("\n"+ ("-" * 20) +"\n")
	  result      = title + line_break
	  error_message  = (error ? "Expected : #{expected} \nActual   : #{value}" : "")
	  return  error ? (result  + error_message +"\n\n") : result +"\n\n"
	end

	report.push (verify(last_name(page)      , "Sam"     , "last_name(page)"))
	report.push (verify(year_of_birth(page)  , 1984      , "year_of_birth(page)"))
	report.push (verify(current_city(page)   , "Delhi"   , "current_city(page)"))

	report.push (verify(past_cities(page)    , ["Mumbai", "Chennai", "Guwahati"]   , "past_cities(page)"))
	report.push (verify(address_change_dates(page)    , ["02/2006", "03/2010", "07/2012"]   , "address_change_dates(page)"))

	report
end


def execute solution_string
	begin
		proc = Proc.new {}
	 	eval(solution_string, proc.binding)
	 	return prepare
	rescue Exception => se
		return se.message.sub("(eval)", "Solutions file")
	end
end

# __solution_file must be in process scope
execute(__solution_string)

            </pre>
    </div>
</div>

<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/ruby");
    editor.getSession().setMode("ace/mode/ruby");
    var beautify = ace.require("ace/ext/beautify")

    window.editor   = editor
    window.beautify = beautify
</script>
</body>
</html>