<!DOCTYPE html>
<html>

<head>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="../../lib/normalize-3.0.2.css">
    <link rel="stylesheet" href="../../lib/font-awesome-4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="app.css">

    <style>
        #app{
            padding-top: 100px;
            height: 200vh;
            border: 1px solid #EEE;
        }
        *{  box-sizing: border-box;  }

    </style>

</head>

<body>

<div id="app">
    <div id="video-sticky">
        <div class="video-wrapper">
            <video width="100%" autoplay="autoplay" controls="controls" 	loop="loop">
                <source src="http://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
                Your browser does not support HTML5 video.
            </video>
        </div>
    </div>
    <p>
        Video courtesy of
        <a href="http://www.bigbuckbunny.org/" target="_blank">Big Buck Bunny</a>.
    </p>
</div>



<script src="../../lib/jquery-2.1.4.min.js"></script>
<!--<script src="app.js"></script>-->

<script>
    var     leftOffset = function(){
                var  collapseWidth      = 250,
                     initialLeftOffset  =  10;

                return $(window).width() - collapseWidth - initialLeftOffset;
            },
            StickyVideo = function($container){
                this.$container = $container;
                this.$video     = $container.find(".video-wrapper").first();
            };

    StickyVideo.prototype.stick = function(){
        this.$container.addClass("fixed");
        this.$container.addClass("resize");
        this.$video.css("transform", "translateX("+leftOffset()+"px)");
    };


    StickyVideo.prototype.unstick = function(){
        this.$container.removeClass("fixed");
        this.$container.removeClass("resize");
        this.$video.css("transform", "");
    };


    $(document).ready(function(){
        var stickyElement       = document.getElementById("video-sticky"),
            stickyVideo         = new StickyVideo($(stickyElement)),
            $stickyContainer    = $("video-sticky"),
            sticky              = new StickyVideo($stickyContainer),
            positionFromTop     = 10;

        var applyScrollPosition = function () {
            var bounds = stickyElement.getBoundingClientRect(),
                    outViewed = bounds.top <= positionFromTop;

            outViewed && stickyVideo.stick();
            outViewed || stickyVideo.unstick();
        };

        $(document).on("scroll", applyScrollPosition);
        $(window).on("resize", applyScrollPosition);

    });
</script>
</body>
</html>
